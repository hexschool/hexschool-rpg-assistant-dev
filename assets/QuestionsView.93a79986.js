import{r as oe,o as I,a as p,w as J,b as i,c,d as e,e as D,f as S,v as X,F as Q,g as V,t as u,h as le,i as j,j as fe,k as he,l as ne,m as M,n as ae,u as t,p as be,q as ye,s as A,x as C,y as ke,z as ee,A as ge}from"./index.f2dd01c9.js";import{g as H,a as z,v as $e,A as se,C as te,Q as we,_ as xe,D as Ce,l as w,b as ie,c as Re,d as qe,f as Le}from"./formatUrl.d29da8e4.js";const Ae={ref:"categoryRef",class:"my-3"},Se={id:"accordionExample",ref:"bsAccordion",class:"accordion"},Qe=e("div",{class:"accordion-item"},[e("h2",{id:"headingOne",class:"accordion-header"},[e("button",{class:"accordion-button",type:"button","data-bs-toggle":"collapse","data-bs-target":"#collapseOne","aria-expanded":"true","aria-controls":"collapseOne"}," \u52A9\u6559\u529F\u80FD ")])],-1),Ve={class:"accordion-item"},Ee={id:"collapseOne",class:"accordion-collapse collapse show","aria-labelledby":"headingOne","data-bs-parent":"#accordionExample"},Ne={class:"accordion-body"},De=["onSubmit"],Oe={class:"row mb-3"},Te={class:"col-md-7"},Ue=e("option",{value:0,selected:""}," \u5168\u90E8\u8AB2\u7A0B ",-1),Fe=["value"],je={class:"row"},Me={class:"col-md-7 mb-3"},Be={class:"input-group"},Pe=e("option",{value:0,selected:""}," \u641C\u5C0B\u7BC4\u570D ",-1),Ge=["value"],He={key:0,id:"searchValueStatus",class:"mt-2 text-danger"},ze={class:"mb-3"},Je=e("h6",null,"\u4F86\u6E90\u7BE9\u9078",-1),Ie={class:"d-flex"},Ke={class:"form-check me-5"},We=e("label",{class:"form-check-label",for:"defaultAll"},"\u5168\u90E8",-1),Xe=["id","onClick"],Ye=["for"],Ze={class:"mb-3"},es=e("h6",null,"\u56DE\u8986\u72C0\u614B",-1),ss={class:"d-flex"},ts={class:"form-check me-5"},os=e("label",{class:"form-check-label",for:"radioAllAnswer"},"\u5168\u90E8",-1),ls={class:"form-check me-5"},ns=e("label",{class:"form-check-label",for:"radioNoReply"},"\u6C92\u6709\u56DE\u8986",-1),as={class:"form-check"},is=e("label",{class:"form-check-label",for:"radioReply"},"\u5DF2\u6709\u56DE\u8986",-1),cs={class:"mb-3"},rs=e("h6",null,"\u89E3\u6C7A\u72C0\u614B",-1),ds={class:"d-flex"},us={class:"form-check me-5"},_s=e("label",{class:"form-check-label",for:"radioAllResolve"},"\u5168\u90E8",-1),ps={class:"form-check me-5"},ms=e("label",{class:"form-check-label",for:"radioNoResolve"},"\u672A\u89E3\u6C7A",-1),vs={class:"form-check"},fs=e("label",{class:"form-check-label",for:"radioResolve"},"\u5DF2\u89E3\u6C7A",-1),hs={class:"mb-3"},bs=e("h6",null,"\u767C\u554F\u985E\u5225",-1),ys={class:"d-flex"},ks={class:"form-check me-5"},gs=e("label",{class:"form-check-label",for:"radioIssueAll"},"\u5168\u90E8",-1),$s=["id","value"],ws=["for"],xs={class:"mb-3"},Cs=e("h6",null,"\u6307\u6D3E\u72C0\u614B",-1),Rs={class:"d-flex"},qs={class:"form-check me-5"},Ls=e("label",{class:"form-check-label",for:"radioAll"},"\u5168\u90E8",-1),As={class:"form-check me-5"},Ss=e("label",{class:"form-check-label",for:"radioNot"},"\u5C1A\u672A\u6307\u6D3E\u7684\u554F\u984C",-1),Qs={class:"form-check"},Vs=e("label",{class:"form-check-label",for:"radioForMe"},"\u6307\u6D3E\u7D66\u6211\u7684\u554F\u984C",-1),Es={class:"btn-group"},Ns=["disabled"],Ds={__name:"QuestionsCategory",props:{questionsFilters:{type:Object,default(){return{}}}},emits:["filterQuestions"],setup(E,{emit:v}){const f=E,d=oe({video_coures_id:0,filter:0,is_resolve:0,count:100,assign:"me"}),m=()=>{const h=JSON.parse(JSON.stringify(d));Object.keys(h).forEach(s=>{h[s]===0&&s!=="is_resolve"&&delete h[s]}),v("filterQuestions",h)};I(m);const _=p(!1);J(()=>d.search_value,()=>{_.value=!0,d.search_value.length>=4&&(_.value=!1)});const b=()=>{window.location.reload()};return(h,s)=>{var N,R,a,y;return i(),c("div",Ae,[e("div",Se,[Qe,e("div",Ve,[e("div",Ee,[e("div",Ne,[e("form",{onSubmit:D(m,["prevent"])},[e("div",Oe,[e("div",Te,[S(e("select",{id:"videoCouresId","onUpdate:modelValue":s[0]||(s[0]=n=>d.video_coures_id=n),class:"form-select","aria-label":"Default select example"},[Ue,(i(!0),c(Q,null,V((N=f.questionsFilters)==null?void 0:N.video_courses,n=>(i(),c("option",{key:n.id,value:n.id},u(n.name),9,Fe))),128))],512),[[X,d.video_coures_id]])])]),e("div",je,[e("div",Me,[e("div",Be,[S(e("select",{id:"searchOptions","onUpdate:modelValue":s[1]||(s[1]=n=>d.filter=n),class:"form-select"},[Pe,(i(!0),c(Q,null,V((R=f.questionsFilters)==null?void 0:R.search_filters,n=>(i(),c("option",{key:n.name,value:n.name},u(n.cht_name),9,Ge))),128))],512),[[X,d.filter]]),S(e("input",{id:"searchValue","onUpdate:modelValue":s[2]||(s[2]=n=>d.search_value=n),type:"text",class:"form-control w-75"},null,512),[[le,d.search_value,void 0,{trim:!0}]])]),_.value?(i(),c("div",He," \u8ACB\u8F38\u5165\u81F3\u5C11 4 \u5B57\u5143\u3002 ")):j("",!0)])]),e("div",ze,[Je,e("div",Ie,[e("div",Ke,[e("input",{id:"defaultAll",class:"form-check-input",type:"radio",name:"source",checked:"",onClick:s[3]||(s[3]=n=>delete d.platform_id)}),We]),(i(!0),c(Q,null,V((a=f.questionsFilters)==null?void 0:a.platforms,n=>(i(),c("div",{key:n.id,class:"platforms form-check me-5"},[e("input",{id:n.name,class:"form-check-input",type:"radio",name:"source",onClick:T=>d.platform_id=n.id},null,8,Xe),e("label",{class:"form-check-label",for:n.name},u(n.name),9,Ye)]))),128))])]),e("div",Ze,[es,e("div",ss,[e("div",ts,[e("input",{id:"radioAllAnswer",class:"form-check-input",type:"radio",name:"answer",checked:"",onClick:s[4]||(s[4]=n=>delete d.has_reply)}),os]),e("div",ls,[e("input",{id:"radioNoReply",class:"form-check-input",type:"radio",name:"answer",onClick:s[5]||(s[5]=n=>d.has_reply=0)}),ns]),e("div",as,[e("input",{id:"radioReply",class:"form-check-input",type:"radio",name:"answer",onClick:s[6]||(s[6]=n=>d.has_reply=1)}),is])])]),e("div",cs,[rs,e("div",ds,[e("div",us,[e("input",{id:"radioAllResolve",class:"form-check-input",type:"radio",name:"resolve",onClick:s[7]||(s[7]=n=>delete d.is_resolve)}),_s]),e("div",ps,[e("input",{id:"radioNoResolve",class:"form-check-input",type:"radio",name:"resolve",checked:"",onClick:s[8]||(s[8]=n=>d.is_resolve=0)}),ms]),e("div",vs,[e("input",{id:"radioResolve",class:"form-check-input",type:"radio",name:"resolve",onClick:s[9]||(s[9]=n=>d.is_resolve=1)}),fs])])]),e("div",hs,[bs,e("div",ys,[e("div",ks,[e("input",{id:"radioIssueAll",class:"form-check-input",type:"radio",name:"issue",checked:"",onClick:s[10]||(s[10]=n=>delete d.type_id)}),gs]),(i(!0),c(Q,null,V((y=f.questionsFilters)==null?void 0:y.types,n=>(i(),c("div",{key:n.id,class:"form-check me-5"},[S(e("input",{id:`radioCourses${n.id}`,"onUpdate:modelValue":s[11]||(s[11]=T=>d.type_id=T),class:"form-check-input",type:"radio",name:"issue",value:n.id},null,8,$s),[[fe,d.type_id]]),e("label",{class:"form-check-label",for:`radioCourses${n.id}`},u(n.name),9,ws)]))),128))])]),e("div",xs,[Cs,e("div",Rs,[e("div",qs,[e("input",{id:"radioAll",class:"form-check-input",type:"radio",name:"assign",onClick:s[12]||(s[12]=n=>delete d.assign)}),Ls]),e("div",As,[e("input",{id:"radioNot",class:"form-check-input",type:"radio",name:"assign",onClick:s[13]||(s[13]=n=>d.assign="empty")}),Ss]),e("div",Qs,[e("input",{id:"radioForMe",class:"form-check-input",type:"radio",name:"assign",checked:"",onClick:s[14]||(s[14]=n=>d.assign="me")}),Vs])])]),e("div",Es,[e("button",{type:"submit",class:"btn btn-outline-primary mt-3",disabled:_.value}," \u5957\u7528\u7BE9\u9078 ",8,Ns),e("button",{type:"button",class:"btn btn-outline-secondary mt-3",onClick:b}," \u6E05\u7A7A\u641C\u5C0B ")])],40,De)])])])],512)],512)}}},Os={class:"row g-2"},Ts={class:"list-group"},Us={class:"text-break"},Fs={key:0,class:"fs-6 list-custom-text-primary"},js={key:1,class:"fs-6 text-break"},Ms={class:"m-0"},Bs={class:"m-0 fw-bold"},Ps={key:0,class:"list-custom-text-primary"},Gs={key:1,class:"list-custom-text-secondary"},Hs={class:"m-0"},zs={class:"d-flex flex-column justify-content-between text-end flex-shrink-0"},Js={class:"m-0"},Is={class:"m-0"},Ks={__name:"QuestionsList",props:{data:{type:Array,default(){return[]}}},emits:["getQuestions"],setup(E,{expose:v,emit:f}){const d=E,m=p(null);return I(()=>{const x=m.value;x.addEventListener("scroll",b=>{b.target.clientHeight+b.target.scrollTop===x.scrollHeight&&f("getQuestions",1)})}),v({questionsListRef:m}),(x,b)=>{const h=he("RouterLink");return i(),c("div",null,[e("div",Os,[e("div",{ref_key:"questionsListRef",ref:m,class:"col-12 overflow-auto questionsList",style:{"max-height":"calc(500px + 97px)"}},[e("div",Ts,[(i(!0),c(Q,null,V(d.data,s=>(i(),ne(h,{key:s.id,class:"list-group-item list-group-item-action d-flex justify-content-between",to:{name:"questions",params:{id:s.id}},title:`\u6642\u9593\uFF1A${t(z)(s.create_time)}`},{default:M(()=>[e("div",null,[e("h5",Us,[ae(u(s.title)+" ",1),e("p",null,[s.from==="teachable"?(i(),c("span",Fs,"\u4F86\u81EA "+u(s.from),1)):(i(),c("span",js,"\u4F86\u81EA "+u(s.from),1))])]),e("p",Ms,[e("small",null,u(s.video_course_name),1)]),e("p",Bs,[s.assign_user_nickname?(i(),c("small",Ps,"\u6307\u6D3E\u7D66 "+u(s.assign_user_nickname),1)):(i(),c("small",Gs,"\u5C1A\u672A\u6307\u6D3E"))]),e("p",Hs,[e("small",null,u(s.video_course_lecture_name),1)])]),e("div",zs,[e("p",Js,[e("small",null,u(s.nickname),1)]),e("p",Is,[e("small",null,u(t(H)(s.create_time)),1)])])]),_:2},1032,["to","title"]))),128))])],512)])])}}},Ws={class:"d-flex justify-content-end align-items-center mb-2"},Xs={class:"me-1"},Ys={class:"btn-group"},Zs={class:"row g-2"},et={class:"card"},st={class:"card-header"},tt={class:"d-flex justify-content-between"},ot=["href"],lt={key:0,class:"fs-6 text-primary"},nt={key:1,class:"fs-6 text-danger"},at={class:"m-0"},it={class:"m-0"},ct={class:"text-end flex-shrink-0"},rt=["value"],dt={class:"assign-user m-0"},ut={key:0,class:"text-primary"},_t={key:1,class:"text-secondary"},pt={class:"m-0"},mt=["title"],vt={class:"list-unstyled"},ft={class:"d-flex justify-content-between mb-3"},ht={class:"d-flex align-items-center"},bt={class:"ms-2"},yt={class:"m-0"},kt={class:"fw-bold"},gt=["data-name","onClick"],$t=["title"],wt={key:0,class:"badge bg-secondary d-block"},xt={key:1,class:"badge bg-success d-block"},Ct=e("hr",null,null,-1),Rt={class:"d-flex justify-content-between mb-3"},qt={class:"d-flex align-items-center"},Lt={class:"ms-2"},At=["href"],St={key:0},Qt={key:1,class:"fw-bold m-0"},Vt=["data-name"],Et={class:"small breadcrumb m-0"},Nt=["title"],Dt={key:0,class:"breadcrumb-item"},Ot={class:"breadcrumb-item"},Tt={key:0,class:"dropstart"},Ut=e("button",{type:"button",class:"btn btn-outline-primary btn-sm","data-bs-toggle":"dropdown","aria-expanded":"false"},[e("i",{class:"bi bi-three-dots"})],-1),Ft={class:"dropdown-menu"},jt=["onClick"],Mt=["onClick"],Bt={key:0},Pt={class:"mt-3 text-end"},Gt=["disabled"],Ht={class:"form-floating mb-3"},zt=e("label",{for:"floatingInput"},"\u641C\u5C0B\u52A9\u6559",-1),Jt={class:"list-group mt-2 overflow-auto",style:{"max-height":"700px"}},It=["onClick"],Kt={__name:"QuestionsCard",props:{body:{type:Object,default(){return{replies:[{}]}}},types:{type:Array,default(){return[]}},listStatus:{type:Boolean,default:!0}},emits:["detailed","editQuestion","questionsListStatus"],setup(E,{emit:v}){const f=E,{apiGetReplyAssistants:d,apiPutAssignUser:m,apiDeleteAssignUser:_,apiPutResolve:x,apiPutQuestionType:b,apiPostReplies:h,apiPutReplies:s,apiDeleteReplies:N}=ie,R=$e.useRoute(),{body:a}=be(f),y=p(!0),n=p({reply_assistants:[]});I(()=>{[].slice.call(document.querySelectorAll(".dropdown-toggle")).map(l=>new Ce(l))});const K=p(null),q=p(null),k=p(null),U=p(null),L=w(async r=>{n.value=await d(r)},()=>q.value);J(()=>R.params.id,async()=>{y.value||await L(R.params.id)});const O=p(""),ce=ye(()=>n.value.reply_assistants.filter(r=>O.value?r.nickname.match(O.value):r.nickname)),re=w(async(r,l)=>{var $;(($=a.value.assign_users[0])==null?void 0:$.id)===l?await _(r,l):await m(r,l),v("detailed",r)},()=>q.value),Y=w(async(r,l)=>{let $="resolve";l&&($="unresolve"),await x(r,$),v("detailed",r)},()=>q.value),de=(r,l)=>{window.confirm(`\u4F60\u78BA\u5B9A\u8981\u6A19\u8A3B\u70BA${l?"\u672A\u89E3\u6C7A":"\u5DF2\u89E3\u6C7A"}\uFF1F`)&&Y(r,l)},W={id:"",content:""},g=oe({...W});J(()=>R.params.id,()=>{Object.assign(g,W),k.value.clearContent()});const ue=w(async r=>{g.id?(await s(r,g.id,g.content),v("detailed",r)):(await h(r,g.content),await Y(r,0)),Object.assign(g,W),k.value.clearContent()},()=>q.value),_e=w(async(r,l)=>{await N(r,l),v("detailed",r)},()=>q.value),pe=(r,l)=>{window.confirm("\u4F60\u78BA\u5B9A\u8981\u522A\u9664\u8A72\u56DE\u8986\uFF1F")&&_e(r,l)},me=w(async(r,l)=>{await b(r,l),v("detailed",r)},()=>q.value),B=p("\u9084\u6C92\u5B9A\u7FA9"),Z=async r=>{const{name:l}=r.target.dataset;B.value=l;const $=JSON.parse(localStorage.getItem("replyTemplate"))||"";let o=$.replace("{{}}",l);$||(o=`Hi\uFF0C${l}\uFF1A`),g.content+=o,k.value.setContent(g.content),setTimeout(()=>{B.value=""},2e3)},ve=r=>{U.value.getReplyTemplate(r)};return(r,l)=>{var $;return i(),c("div",{ref_key:"questionsCardRef",ref:q},[e("div",Ws,[e("div",Xs,[e("button",{type:"button",class:"btn-reply-modal btn btn-sm btn-outline-primary",onClick:l[0]||(l[0]=o=>ve("replyTemplate"))}," \u8A2D\u5B9A\u7BC4\u672C ")]),e("div",Ys,[e("button",{type:"button",class:A(["btn-assign btn btn-sm btn-outline-primary",{active:!y.value}]),onClick:l[1]||(l[1]=o=>{y.value=!1,t(L)(t(a).id)})}," \u6307\u6D3E ",2),e("button",{type:"button",class:A(["btn-reply btn btn-sm btn-outline-primary",{active:y.value}]),onClick:l[2]||(l[2]=o=>y.value=!0)}," \u56DE\u8986 ",2)]),e("button",{type:"button",class:"btn-toggle-list btn btn-outline-primary btn-sm ms-1",title:"\u7E2E\u5408\u554F\u984C\u5217\u8868",onClick:l[3]||(l[3]=o=>v("questionsListStatus"))},[e("i",{class:A(["bi",[f.listStatus?"bi-arrow-bar-left":"bi-arrow-bar-right"]])},null,2)])]),e("div",Zs,[e("div",{class:A([f.listStatus?"col-md-6":"col-md-5"])},[e("div",et,[e("div",st,[e("div",tt,[e("div",null,[e("h5",null,[e("a",{href:t(a).url,class:"me-2 link-underline link-underline-opacity-0",target:"_blank",title:"\u524D\u5F80\u8A72\u554F\u984C\u9801\u9762"},u(t(a).title),9,ot),e("p",null,[t(a).from==="teachable"?(i(),c("span",lt,"\u4F86\u81EA "+u(t(a).from),1)):(i(),c("span",nt,"\u4F86\u81EA "+u(t(a).from),1))])]),e("p",at,[e("small",null,u(t(a).video_courses_name),1)]),e("p",it,[e("small",null,u(t(a).video_course_lecture_name),1)])]),e("div",ct,[S(e("select",{"onUpdate:modelValue":l[4]||(l[4]=o=>t(a).question_type_id=o),class:"btn-change-type form-select form-select-sm",onChange:l[5]||(l[5]=o=>t(me)(t(a).id,o.target.value))},[(i(!0),c(Q,null,V(E.types,o=>(i(),c("option",{key:o.id,value:o.id},u(o.name),9,rt))),128))],544),[[X,t(a).question_type_id]]),e("p",dt,[t(a).assign_users.length?(i(),c("small",ut,"\u6307\u6D3E\u7D66 "+u(($=t(a).assign_users[0])==null?void 0:$.nickname),1)):(i(),c("small",_t,"\u5C1A\u672A\u6307\u6D3E"))]),e("p",pt,[e("small",{title:`\u6642\u9593\uFF1A${t(z)(t(a).create_time)}`},u(t(H)(t(a).create_time))+" / "+u(t(a).replies.length)+" \u500B\u7B54\u6848",9,mt)])])])]),e("div",{ref_key:"questionListRef",ref:K,class:"card-body overflow-auto",style:{"max-height":"500px"}},[e("ul",vt,[e("li",null,[e("div",ft,[e("div",ht,[C(se,{avatar:t(a).avatar},null,8,["avatar"]),e("div",bt,[e("p",yt,[e("span",kt,u(t(a).nickname),1),e("a",{class:"btn-copy-username ms-2",href:"#",title:"\u8907\u88FD\u66B1\u7A31","data-name":t(a).nickname,onClick:D(Z,["prevent"])},[e("i",{class:A(["pe-none bi",B.value===t(a).nickname?"bi-check-lg":"bi-clipboard"])},null,2)],8,gt)]),e("p",{class:"m-0 small",title:`\u6642\u9593\uFF1A${t(z)(t(a).create_time)}`},u(t(H)(t(a).create_time)),9,$t)])]),e("a",{href:"#",class:"toggle-resolve",onClick:l[6]||(l[6]=D(o=>de(t(a).id,t(a).resolve),["prevent"]))},[t(a).resolve?(i(),c("span",wt,"\u6A19\u8A3B\u70BA\u672A\u89E3\u6C7A")):(i(),c("span",xt,"\u6A19\u8A3B\u70BA\u5DF2\u89E3\u6C7A"))])]),C(te,{content:t(a).body},null,8,["content"]),Ct]),(i(!0),c(Q,null,V(t(a).replies,(o,P)=>(i(),c("li",{key:o.id},[e("div",Rt,[e("div",qt,[C(se,{avatar:o.avatar},null,8,["avatar"]),e("div",Lt,[o.assistant_level?(i(),c("p",{key:0,style:ke({color:o.assistant_color_code}),class:"fw-bold m-0"},[e("a",{href:o.assistant_icon_url},[ae(u(o.nickname)+" ",1),o.assistant_title?(i(),c("span",St," ("+u(o.assistant_title)+") ",1)):j("",!0)],8,At)],4)):(i(),c("p",Qt,[e("span",null,u(o.nickname),1),e("a",{class:"replies-nickname ms-2",href:"#",title:"\u8907\u88FD\u66B1\u7A31","data-name":o.nickname,onClick:l[7]||(l[7]=D(G=>Z(G),["prevent"]))},[e("i",{class:A(["pe-none bi",B.value===o.nickname?"bi-check-lg":"bi-clipboard"])},null,2)],8,Vt)])),e("ol",Et,[e("li",{class:"breadcrumb-item",title:`\u6642\u9593\uFF1A${t(z)(o.create_time)}`},u(t(H)(o.create_time)),9,Nt),o.is_best_answer?(i(),c("li",Dt," \u6700\u4F73\u89E3\u7B54 ")):j("",!0),e("li",Ot,u(o.upvotes)+" \u500B\u63A8 ",1)])])]),o.is_author?(i(),c("div",Tt,[Ut,e("ul",Ft,[e("li",null,[e("a",{class:"btn-edit-reply dropdown-item",href:"#",onClick:D(G=>{k.value.setContent(o.body),g.id=o.id},["prevent"])},"\u7DE8\u8F2F",8,jt)]),e("li",null,[e("a",{class:"btn-delete-reply dropdown-item",href:"#",onClick:D(G=>pe(t(a).id,o.id),["prevent"])},"\u522A\u9664",8,Mt)])])])):j("",!0)]),C(te,{content:o.body},null,8,["content"]),t(a).replies.length!==P+1?(i(),c("hr",Bt)):j("",!0)]))),128))])],512)])],2),e("div",{class:A(["assistant position-relative",[f.listStatus?"col-md-6":"col-md-7"]])},[S(e("div",null,[C(we,{ref_key:"quillEditorRef",ref:k,modelValue:g.content,"onUpdate:modelValue":l[8]||(l[8]=o=>g.content=o)},null,8,["modelValue"]),e("div",Pt,[e("button",{type:"button",class:"submit-reply btn btn-outline-primary",disabled:g.content==="",onClick:l[9]||(l[9]=o=>t(ue)(t(a).id))}," \u9001\u51FA\u56DE\u8986 ",8,Gt)])],512),[[ee,y.value]]),S(e("div",null,[e("div",Ht,[S(e("input",{id:"searchUserName","onUpdate:modelValue":l[10]||(l[10]=o=>O.value=o),type:"text",class:"form-control",placeholder:"\u52A9\u6559\u540D\u7A31"},null,512),[[le,O.value]]),zt,e("div",Jt,[(i(!0),c(Q,null,V(t(ce),o=>{var P;return i(),c("a",{key:o.user_id,href:"#",class:A(["list-group-item list-group-item-action",((P=t(a).assign_users[0])==null?void 0:P.id)===o.user_id?"active":""]),onClick:D(G=>t(re)(t(a).id,o.user_id),["prevent"])},u(o.nickname),11,It)}),128))])])],512),[[ee,!y.value]])],2)]),C(xe,{ref_key:"replyTemplateModalRef",ref:U},null,512)],512)}}},Zt={__name:"QuestionsView",setup(E){const{apiGetQuestionsList:v,apiGetQuestionsFilters:f,apiGetQuestionBody:d}=ie,m=ge(),_=p({questions:[]}),x=p({filters:{}}),b=p({question:{assign_users:[{}],replies:[{}]}});let h="";const s=p(1),N=p(null),R=p(null),a=p(null),y=w(async()=>{x.value=await f(),m.params.id&&(b.value=await d(m.params.id))});I(y);const n=w(async()=>{!m.params.id||(b.value=await d(m.params.id))},R.value);J(()=>m.params.id,n);const T=w(async k=>{b.value=await d(k)},()=>R.value),K=w(async k=>{const U=_.value.pagination.total_page,L=_.value.pagination.current_page;if(U===L)return;s.value+=k;const F=await v(h,s.value),O=_.value.questions.concat(F.questions);_.value.questions=O,_.value.pagination=F.pagination},()=>N.value),q=w(async k=>{h=Le(a.value.questionsListRef,k),s.value=1,_.value=await v(h,s.value)},()=>N.value);return(k,U)=>(i(),ne(Re,null,{category:M(()=>[C(Ds,{"questions-filters":x.value.filters,onFilterQuestions:t(q)},null,8,["questions-filters","onFilterQuestions"])]),"count-block":M(()=>{var L;return[C(qe,{total:(L=_.value.pagination)==null?void 0:L.total,length:_.value.questions.length,title:"\u554F\u984C"},null,8,["total","length"])]}),list:M(()=>[C(Ks,{ref_key:"questionsListComponentRef",ref:a,data:_.value.questions,onGetQuestions:t(K)},null,8,["data","onGetQuestions"])]),body:M(({toggleList:L,listStatus:F})=>[C(Kt,{listStatus:F,body:b.value.question,types:x.value.filters.types,onDetailed:t(T),onQuestionsListStatus:L},null,8,["listStatus","body","types","onDetailed","onQuestionsListStatus"])]),_:1}))}};export{Zt as default};
